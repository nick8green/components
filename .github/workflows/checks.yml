name: build checks for application

on:
  push:
    branches:
      - "**"
      - "!main"
      - "!release"
  workflow_call:

jobs:
  # run unit tests
  test:
    name: 🧪 unit tests
    uses: nick8green/workflows/.github/workflows/node-unit-test.yml@main

  # build package
  build:
    name: 🏗️ build package
    uses: nick8green/workflows/.github/workflows/node-build.yml@main

  # build storybook
  storybook:
    name: 📚 build storybook
    runs-on: ubuntu-latest
    steps:
      - name: checkout code
        uses: actions/checkout@v4

      - uses: nick8green/workflows/actions/node/setup@main

      - name: build storybook
        run: npm run build:storybook

  # lint code
  linting:
    name: ✏️ lint code
    uses: nick8green/workflows/.github/workflows/node-lint.yml@main
