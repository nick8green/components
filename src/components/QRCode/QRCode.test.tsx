import { render, screen } from "@testing-library/react";

import QRCode from "components/QRCode";

describe("QR Code Component", () => {
  test("renders successfully", () => {
    render(<QRCode title="testing" value="http://example.com" />);
    const qrCode = screen.getByTestId("qr-code");
    expect(qrCode).toBeInTheDocument();
    expect(qrCode.getElementsByTagName("title")[0].innerHTML).toBe("testing");
    const paths = qrCode.getElementsByTagName("path");
    expect(paths).toHaveLength(2);
    expect(paths[0]).toHaveAttribute("fill", "#ffffff");
    expect(paths[1]).toHaveAttribute("fill", "#000000");
    // <svg height="128" width="128" viewBox="0 0 29 29" role="img" data-testid="qr-code">
    //   <title>testing</title>
    //   <path fill="#ffffff" d="M0,0 h29v29H0z" shape-rendering="crispEdges"></path>
    //   <path fill="#000000" d="M2 2h7v1H2zM13 2h1v1H13zM16 2h1v1H16zM20,2 h7v1H20zM2 3h1v1H2zM8 3h1v1H8zM10 3h6v1H10zM18 3h1v1H18zM20 3h1v1H20zM26,3 h1v1H26zM2 4h1v1H2zM4 4h3v1H4zM8 4h1v1H8zM11 4h1v1H11zM15 4h2v1H15zM20 4h1v1H20zM22 4h3v1H22zM26,4 h1v1H26zM2 5h1v1H2zM4 5h3v1H4zM8 5h1v1H8zM10 5h4v1H10zM16 5h3v1H16zM20 5h1v1H20zM22 5h3v1H22zM26,5 h1v1H26zM2 6h1v1H2zM4 6h3v1H4zM8 6h1v1H8zM10 6h1v1H10zM12 6h1v1H12zM14 6h3v1H14zM18 6h1v1H18zM20 6h1v1H20zM22 6h3v1H22zM26,6 h1v1H26zM2 7h1v1H2zM8 7h1v1H8zM13 7h4v1H13zM20 7h1v1H20zM26,7 h1v1H26zM2 8h7v1H2zM10 8h1v1H10zM12 8h1v1H12zM14 8h1v1H14zM16 8h1v1H16zM18 8h1v1H18zM20,8 h7v1H20zM10 9h3v1H10zM14 9h1v1H14zM16 9h2v1H16zM3 10h1v1H3zM5 10h4v1H5zM10 10h2v1H10zM13 10h1v1H13zM15 10h6v1H15zM22 10h2v1H22zM25 10h1v1H25zM2 11h3v1H2zM10 11h2v1H10zM16 11h2v1H16zM21 11h5v1H21zM2 12h3v1H2zM6 12h1v1H6zM8 12h2v1H8zM12 12h3v1H12zM16 12h2v1H16zM19 12h2v1H19zM22 12h2v1H22zM26,12 h1v1H26zM4 13h4v1H4zM9 13h2v1H9zM12 13h1v1H12zM14 13h1v1H14zM16 13h2v1H16zM20 13h1v1H20zM22,13 h5v1H22zM2 14h1v1H2zM4 14h2v1H4zM8 14h1v1H8zM10 14h7v1H10zM18 14h1v1H18zM20 14h1v1H20zM26,14 h1v1H26zM2 15h2v1H2zM6 15h2v1H6zM13 15h2v1H13zM17 15h1v1H17zM22 15h1v1H22zM25 15h1v1H25zM2 16h3v1H2zM6 16h3v1H6zM11 16h1v1H11zM13 16h1v1H13zM15 16h1v1H15zM17 16h1v1H17zM19 16h1v1H19zM23,16 h4v1H23zM2 17h1v1H2zM5 17h2v1H5zM11 17h1v1H11zM13 17h3v1H13zM19 17h4v1H19zM24 17h1v1H24zM26,17 h1v1H26zM2 18h1v1H2zM5 18h1v1H5zM7 18h2v1H7zM11 18h1v1H11zM17 18h6v1H17zM24 18h2v1H24zM10 19h1v1H10zM13 19h1v1H13zM16 19h1v1H16zM18 19h1v1H18zM22 19h1v1H22zM25 19h1v1H25zM2 20h7v1H2zM12 20h1v1H12zM16 20h1v1H16zM18 20h1v1H18zM20 20h1v1H20zM22 20h2v1H22zM26,20 h1v1H26zM2 21h1v1H2zM8 21h1v1H8zM10 21h4v1H10zM15 21h4v1H15zM22 21h1v1H22zM2 22h1v1H2zM4 22h3v1H4zM8 22h1v1H8zM10 22h1v1H10zM12 22h3v1H12zM16 22h8v1H16zM26,22 h1v1H26zM2 23h1v1H2zM4 23h3v1H4zM8 23h1v1H8zM10 23h2v1H10zM14 23h3v1H14zM18 23h3v1H18zM23 23h1v1H23zM25,23 h2v1H25zM2 24h1v1H2zM4 24h3v1H4zM8 24h1v1H8zM12 24h1v1H12zM15 24h2v1H15zM18 24h1v1H18zM21 24h2v1H21zM24,24 h3v1H24zM2 25h1v1H2zM8 25h1v1H8zM10 25h1v1H10zM15 25h1v1H15zM19 25h4v1H19zM24,25 h3v1H24zM2 26h7v1H2zM11 26h2v1H11zM14 26h3v1H14zM18 26h3v1H18zM23 26h1v1H23zM26,26 h1v1H26z" shape-rendering="crispEdges"></path>
    // </svg>
  });

  test("renders successfully with a defined background", () => {
    render(
      <QRCode
        display={{ background: "#f00" }}
        title="testing"
        value="http://example.com"
      />,
    );
    const qrCode = screen.getByTestId("qr-code");
    expect(qrCode.getElementsByTagName("path")[0]).toHaveAttribute(
      "fill",
      "#f00",
    );
    // <svg height="128" width="128" viewBox="0 0 29 29" role="img" data-testid="qr-code">
    //   <title>testing</title>
    //   <path fill="#f00" d="M0,0 h29v29H0z" shape-rendering="crispEdges"></path>
    //   <path fill="#000000" d="M2 2h7v1H2zM13 2h1v1H13zM16 2h1v1H16zM20,2 h7v1H20zM2 3h1v1H2zM8 3h1v1H8zM10 3h6v1H10zM18 3h1v1H18zM20 3h1v1H20zM26,3 h1v1H26zM2 4h1v1H2zM4 4h3v1H4zM8 4h1v1H8zM11 4h1v1H11zM15 4h2v1H15zM20 4h1v1H20zM22 4h3v1H22zM26,4 h1v1H26zM2 5h1v1H2zM4 5h3v1H4zM8 5h1v1H8zM10 5h4v1H10zM16 5h3v1H16zM20 5h1v1H20zM22 5h3v1H22zM26,5 h1v1H26zM2 6h1v1H2zM4 6h3v1H4zM8 6h1v1H8zM10 6h1v1H10zM12 6h1v1H12zM14 6h3v1H14zM18 6h1v1H18zM20 6h1v1H20zM22 6h3v1H22zM26,6 h1v1H26zM2 7h1v1H2zM8 7h1v1H8zM13 7h4v1H13zM20 7h1v1H20zM26,7 h1v1H26zM2 8h7v1H2zM10 8h1v1H10zM12 8h1v1H12zM14 8h1v1H14zM16 8h1v1H16zM18 8h1v1H18zM20,8 h7v1H20zM10 9h3v1H10zM14 9h1v1H14zM16 9h2v1H16zM3 10h1v1H3zM5 10h4v1H5zM10 10h2v1H10zM13 10h1v1H13zM15 10h6v1H15zM22 10h2v1H22zM25 10h1v1H25zM2 11h3v1H2zM10 11h2v1H10zM16 11h2v1H16zM21 11h5v1H21zM2 12h3v1H2zM6 12h1v1H6zM8 12h2v1H8zM12 12h3v1H12zM16 12h2v1H16zM19 12h2v1H19zM22 12h2v1H22zM26,12 h1v1H26zM4 13h4v1H4zM9 13h2v1H9zM12 13h1v1H12zM14 13h1v1H14zM16 13h2v1H16zM20 13h1v1H20zM22,13 h5v1H22zM2 14h1v1H2zM4 14h2v1H4zM8 14h1v1H8zM10 14h7v1H10zM18 14h1v1H18zM20 14h1v1H20zM26,14 h1v1H26zM2 15h2v1H2zM6 15h2v1H6zM13 15h2v1H13zM17 15h1v1H17zM22 15h1v1H22zM25 15h1v1H25zM2 16h3v1H2zM6 16h3v1H6zM11 16h1v1H11zM13 16h1v1H13zM15 16h1v1H15zM17 16h1v1H17zM19 16h1v1H19zM23,16 h4v1H23zM2 17h1v1H2zM5 17h2v1H5zM11 17h1v1H11zM13 17h3v1H13zM19 17h4v1H19zM24 17h1v1H24zM26,17 h1v1H26zM2 18h1v1H2zM5 18h1v1H5zM7 18h2v1H7zM11 18h1v1H11zM17 18h6v1H17zM24 18h2v1H24zM10 19h1v1H10zM13 19h1v1H13zM16 19h1v1H16zM18 19h1v1H18zM22 19h1v1H22zM25 19h1v1H25zM2 20h7v1H2zM12 20h1v1H12zM16 20h1v1H16zM18 20h1v1H18zM20 20h1v1H20zM22 20h2v1H22zM26,20 h1v1H26zM2 21h1v1H2zM8 21h1v1H8zM10 21h4v1H10zM15 21h4v1H15zM22 21h1v1H22zM2 22h1v1H2zM4 22h3v1H4zM8 22h1v1H8zM10 22h1v1H10zM12 22h3v1H12zM16 22h8v1H16zM26,22 h1v1H26zM2 23h1v1H2zM4 23h3v1H4zM8 23h1v1H8zM10 23h2v1H10zM14 23h3v1H14zM18 23h3v1H18zM23 23h1v1H23zM25,23 h2v1H25zM2 24h1v1H2zM4 24h3v1H4zM8 24h1v1H8zM12 24h1v1H12zM15 24h2v1H15zM18 24h1v1H18zM21 24h2v1H21zM24,24 h3v1H24zM2 25h1v1H2zM8 25h1v1H8zM10 25h1v1H10zM15 25h1v1H15zM19 25h4v1H19zM24,25 h3v1H24zM2 26h7v1H2zM11 26h2v1H11zM14 26h3v1H14zM18 26h3v1H18zM23 26h1v1H23zM26,26 h1v1H26z" shape-rendering="crispEdges"></path>
    // </svg>
  });

  test("renders successfully with a defined foreground", () => {
    render(
      <QRCode
        display={{ foreground: "#f00" }}
        title="testing"
        value="http://example.com"
      />,
    );
    const qrCode = screen.getByTestId("qr-code");
    expect(qrCode.getElementsByTagName("path")[1]).toHaveAttribute(
      "fill",
      "#f00",
    );
    // <svg height="128" width="128" viewBox="0 0 29 29" role="img" data-testid="qr-code">
    //   <title>testing</title>
    //   <path fill="#ffffff" d="M0,0 h29v29H0z" shape-rendering="crispEdges"></path>
    //   <path fill="#f00" d="M2 2h7v1H2zM13 2h1v1H13zM16 2h1v1H16zM20,2 h7v1H20zM2 3h1v1H2zM8 3h1v1H8zM10 3h6v1H10zM18 3h1v1H18zM20 3h1v1H20zM26,3 h1v1H26zM2 4h1v1H2zM4 4h3v1H4zM8 4h1v1H8zM11 4h1v1H11zM15 4h2v1H15zM20 4h1v1H20zM22 4h3v1H22zM26,4 h1v1H26zM2 5h1v1H2zM4 5h3v1H4zM8 5h1v1H8zM10 5h4v1H10zM16 5h3v1H16zM20 5h1v1H20zM22 5h3v1H22zM26,5 h1v1H26zM2 6h1v1H2zM4 6h3v1H4zM8 6h1v1H8zM10 6h1v1H10zM12 6h1v1H12zM14 6h3v1H14zM18 6h1v1H18zM20 6h1v1H20zM22 6h3v1H22zM26,6 h1v1H26zM2 7h1v1H2zM8 7h1v1H8zM13 7h4v1H13zM20 7h1v1H20zM26,7 h1v1H26zM2 8h7v1H2zM10 8h1v1H10zM12 8h1v1H12zM14 8h1v1H14zM16 8h1v1H16zM18 8h1v1H18zM20,8 h7v1H20zM10 9h3v1H10zM14 9h1v1H14zM16 9h2v1H16zM3 10h1v1H3zM5 10h4v1H5zM10 10h2v1H10zM13 10h1v1H13zM15 10h6v1H15zM22 10h2v1H22zM25 10h1v1H25zM2 11h3v1H2zM10 11h2v1H10zM16 11h2v1H16zM21 11h5v1H21zM2 12h3v1H2zM6 12h1v1H6zM8 12h2v1H8zM12 12h3v1H12zM16 12h2v1H16zM19 12h2v1H19zM22 12h2v1H22zM26,12 h1v1H26zM4 13h4v1H4zM9 13h2v1H9zM12 13h1v1H12zM14 13h1v1H14zM16 13h2v1H16zM20 13h1v1H20zM22,13 h5v1H22zM2 14h1v1H2zM4 14h2v1H4zM8 14h1v1H8zM10 14h7v1H10zM18 14h1v1H18zM20 14h1v1H20zM26,14 h1v1H26zM2 15h2v1H2zM6 15h2v1H6zM13 15h2v1H13zM17 15h1v1H17zM22 15h1v1H22zM25 15h1v1H25zM2 16h3v1H2zM6 16h3v1H6zM11 16h1v1H11zM13 16h1v1H13zM15 16h1v1H15zM17 16h1v1H17zM19 16h1v1H19zM23,16 h4v1H23zM2 17h1v1H2zM5 17h2v1H5zM11 17h1v1H11zM13 17h3v1H13zM19 17h4v1H19zM24 17h1v1H24zM26,17 h1v1H26zM2 18h1v1H2zM5 18h1v1H5zM7 18h2v1H7zM11 18h1v1H11zM17 18h6v1H17zM24 18h2v1H24zM10 19h1v1H10zM13 19h1v1H13zM16 19h1v1H16zM18 19h1v1H18zM22 19h1v1H22zM25 19h1v1H25zM2 20h7v1H2zM12 20h1v1H12zM16 20h1v1H16zM18 20h1v1H18zM20 20h1v1H20zM22 20h2v1H22zM26,20 h1v1H26zM2 21h1v1H2zM8 21h1v1H8zM10 21h4v1H10zM15 21h4v1H15zM22 21h1v1H22zM2 22h1v1H2zM4 22h3v1H4zM8 22h1v1H8zM10 22h1v1H10zM12 22h3v1H12zM16 22h8v1H16zM26,22 h1v1H26zM2 23h1v1H2zM4 23h3v1H4zM8 23h1v1H8zM10 23h2v1H10zM14 23h3v1H14zM18 23h3v1H18zM23 23h1v1H23zM25,23 h2v1H25zM2 24h1v1H2zM4 24h3v1H4zM8 24h1v1H8zM12 24h1v1H12zM15 24h2v1H15zM18 24h1v1H18zM21 24h2v1H21zM24,24 h3v1H24zM2 25h1v1H2zM8 25h1v1H8zM10 25h1v1H10zM15 25h1v1H15zM19 25h4v1H19zM24,25 h3v1H24zM2 26h7v1H2zM11 26h2v1H11zM14 26h3v1H14zM18 26h3v1H18zM23 26h1v1H23zM26,26 h1v1H26z" shape-rendering="crispEdges"></path>
    // </svg>
  });

  test("renders successfully with an embedded image", () => {
    render(
      <QRCode
        display={{ image: "/path/to/image.png" }}
        title="testing"
        value="http://example.com"
      />,
    );
    const qrCode = screen.getByTestId("qr-code");
    const image = qrCode.getElementsByTagName("image")[0];
    expect(image).toHaveAttribute("href", "/path/to/image.png");
    expect(image).toHaveAttribute("opacity", "0.75");
    // <svg height="128" width="128" viewBox="0 0 29 29" role="img" data-testid="qr-code">
    //   <title>testing</title>
    //   <path fill="#ffffff" d="M0,0 h29v29H0z" shape-rendering="crispEdges"></path>
    //   <path fill="#000000" d="M2 2h7v1H2zM13 2h1v1H13zM16 2h1v1H16zM20,2 h7v1H20zM2 3h1v1H2zM8 3h1v1H8zM10 3h6v1H10zM18 3h1v1H18zM20 3h1v1H20zM26,3 h1v1H26zM2 4h1v1H2zM4 4h3v1H4zM8 4h1v1H8zM11 4h1v1H11zM15 4h2v1H15zM20 4h1v1H20zM22 4h3v1H22zM26,4 h1v1H26zM2 5h1v1H2zM4 5h3v1H4zM8 5h1v1H8zM10 5h4v1H10zM16 5h3v1H16zM20 5h1v1H20zM22 5h3v1H22zM26,5 h1v1H26zM2 6h1v1H2zM4 6h3v1H4zM8 6h1v1H8zM10 6h1v1H10zM12 6h1v1H12zM14 6h3v1H14zM18 6h1v1H18zM20 6h1v1H20zM22 6h3v1H22zM26,6 h1v1H26zM2 7h1v1H2zM8 7h1v1H8zM13 7h4v1H13zM20 7h1v1H20zM26,7 h1v1H26zM2 8h7v1H2zM10 8h1v1H10zM12 8h1v1H12zM14 8h1v1H14zM16 8h1v1H16zM18 8h1v1H18zM20,8 h7v1H20zM10 9h3v1H10zM14 9h1v1H14zM16 9h2v1H16zM3 10h1v1H3zM5 10h4v1H5zM10 10h2v1H10zM13 10h1v1H13zM15 10h6v1H15zM22 10h2v1H22zM25 10h1v1H25zM2 11h3v1H2zM10 11h2v1H10zM16 11h2v1H16zM21 11h5v1H21zM2 12h3v1H2zM6 12h1v1H6zM8 12h2v1H8zM12 12h3v1H12zM16 12h2v1H16zM19 12h2v1H19zM22 12h2v1H22zM26,12 h1v1H26zM4 13h4v1H4zM9 13h2v1H9zM12 13h1v1H12zM14 13h1v1H14zM16 13h2v1H16zM20 13h1v1H20zM22,13 h5v1H22zM2 14h1v1H2zM4 14h2v1H4zM8 14h1v1H8zM10 14h7v1H10zM18 14h1v1H18zM20 14h1v1H20zM26,14 h1v1H26zM2 15h2v1H2zM6 15h2v1H6zM13 15h2v1H13zM17 15h1v1H17zM22 15h1v1H22zM25 15h1v1H25zM2 16h3v1H2zM6 16h3v1H6zM11 16h1v1H11zM13 16h1v1H13zM15 16h1v1H15zM17 16h1v1H17zM19 16h1v1H19zM23,16 h4v1H23zM2 17h1v1H2zM5 17h2v1H5zM11 17h1v1H11zM13 17h3v1H13zM19 17h4v1H19zM24 17h1v1H24zM26,17 h1v1H26zM2 18h1v1H2zM5 18h1v1H5zM7 18h2v1H7zM11 18h1v1H11zM17 18h6v1H17zM24 18h2v1H24zM10 19h1v1H10zM13 19h1v1H13zM16 19h1v1H16zM18 19h1v1H18zM22 19h1v1H22zM25 19h1v1H25zM2 20h7v1H2zM12 20h1v1H12zM16 20h1v1H16zM18 20h1v1H18zM20 20h1v1H20zM22 20h2v1H22zM26,20 h1v1H26zM2 21h1v1H2zM8 21h1v1H8zM10 21h4v1H10zM15 21h4v1H15zM22 21h1v1H22zM2 22h1v1H2zM4 22h3v1H4zM8 22h1v1H8zM10 22h1v1H10zM12 22h3v1H12zM16 22h8v1H16zM26,22 h1v1H26zM2 23h1v1H2zM4 23h3v1H4zM8 23h1v1H8zM10 23h2v1H10zM14 23h3v1H14zM18 23h3v1H18zM23 23h1v1H23zM25,23 h2v1H25zM2 24h1v1H2zM4 24h3v1H4zM8 24h1v1H8zM12 24h1v1H12zM15 24h2v1H15zM18 24h1v1H18zM21 24h2v1H21zM24,24 h3v1H24zM2 25h1v1H2zM8 25h1v1H8zM10 25h1v1H10zM15 25h1v1H15zM19 25h4v1H19zM24,25 h3v1H24zM2 26h7v1H2zM11 26h2v1H11zM14 26h3v1H14zM18 26h3v1H18zM23 26h1v1H23zM26,26 h1v1H26z" shape-rendering="crispEdges"></path>
    //   <image href="/path/to/image.png" height="14.5" width="14.5" x="7.25" y="7.25" preserveAspectRatio="none" opacity="0.75"></image>
    // </svg>
  });
});
